<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ducky Script to HID Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
            min-height: 100vh;
            padding: 2rem;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #d1d5db;
        }

        .prank-message {
            background: #fbbf24;
            color: #000;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            display: none;
            align-items: start;
            gap: 1rem;
            animation: pulse 2s infinite;
        }

        .prank-message.show {
            display: flex;
        }

        .prank-message svg {
            flex-shrink: 0;
            margin-top: 0.25rem;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: #1f2937;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .panel-title {
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .button-group {
            display: flex;
            gap: 0.5rem;
        }

        button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #7c3aed;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #6d28d9;
        }

        .btn-success {
            background: #059669;
            color: white;
            width: 100%;
        }

        .btn-success:hover:not(:disabled) {
            background: #047857;
        }

        .btn-blue {
            background: #2563eb;
            color: white;
        }

        .btn-blue:hover:not(:disabled) {
            background: #1d4ed8;
        }

        textarea {
            width: 100%;
            height: 400px;
            background: #111827;
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            padding: 1rem;
            border: 1px solid #374151;
            border-radius: 0.375rem;
            resize: vertical;
            outline: none;
        }

        textarea:focus {
            border-color: #7c3aed;
        }

        textarea.output {
            color: #22d3ee;
        }

        textarea::placeholder {
            color: #6b7280;
        }

        .info-panel {
            background: #1f2937;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .info-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .info-item {
            font-size: 0.875rem;
            color: #d1d5db;
        }

        .info-item-title {
            font-weight: 600;
            color: #a855f7;
            margin-bottom: 0.25rem;
        }

        .icon {
            display: inline-block;
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ducky Script to HID Converter</h1>
            <p>Convert Rubber Ducky scripts to HID format</p>
        </div>

        <div id="prankMessage" class="prank-message">
            <span style="font-size: 24px;">‚ö†Ô∏è</span>
            <div>
                <p style="font-weight: bold;">Message from the Author:</p>
                <p style="font-style: italic;">"Why would you even need this? Just write your HID scripts directly! But fine... here's your converter. You're welcome. üòè"</p>
            </div>
        </div>

        <div class="grid">
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">
                        üìÑ Ducky Script Input
                    </div>
                    <button class="btn-primary" onclick="handleImport()">Import File</button>
                </div>
                <textarea id="duckyInput" placeholder="Enter Ducky Script here...

Example:
REM Open Run dialog
GUI r
DELAY 500
STRING notepad
ENTER
DELAY 1000
STRING Hello World!"></textarea>
                <button class="btn-success" onclick="handleConvert()">Convert to HID</button>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">HID Script Output</div>
                    <div class="button-group">
                        <button id="copyBtn" class="btn-blue" onclick="handleCopy()" disabled>
                            üìã <span id="copyText">Copy</span>
                        </button>
                        <button id="downloadBtn" class="btn-blue" onclick="handleDownload()" disabled>
                            üíæ Download
                        </button>
                    </div>
                </div>
                <textarea id="hidOutput" class="output" readonly placeholder="Converted HID script will appear here..."></textarea>
            </div>
        </div>

        <div class="info-panel">
            <h3 class="info-title">Supported Commands</h3>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-item-title">Basic:</div>
                    <p>STRING, ENTER, DELAY</p>
                </div>
                <div class="info-item">
                    <div class="info-item-title">Modifiers:</div>
                    <p>GUI, CTRL, ALT, SHIFT</p>
                </div>
                <div class="info-item">
                    <div class="info-item-title">Navigation:</div>
                    <p>UP, DOWN, LEFT, RIGHT</p>
                </div>
                <div class="info-item">
                    <div class="info-item-title">Special:</div>
                    <p>F1-F12, ESC, TAB, HOME</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Define keyMap and functions at the top level
        const keyMap = {
            'ENTER': '0x28',
            'ESC': '0x29',
            'ESCAPE': '0x29',
            'BACKSPACE': '0x2A',
            'TAB': '0x2B',
            'SPACE': '0x2C',
            'CAPSLOCK': '0x39',
            'F1': '0x3A',
            'F2': '0x3B',
            'F3': '0x3C',
            'F4': '0x3D',
            'F5': '0x3E',
            'F6': '0x3F',
            'F7': '0x40',
            'F8': '0x41',
            'F9': '0x42',
            'F10': '0x43',
            'F11': '0x44',
            'F12': '0x45',
            'PRINTSCREEN': '0x46',
            'SCROLLLOCK': '0x47',
            'PAUSE': '0x48',
            'INSERT': '0x49',
            'HOME': '0x4A',
            'PAGEUP': '0x4B',
            'DELETE': '0x4C',
            'END': '0x4D',
            'PAGEDOWN': '0x4E',
            'RIGHT': '0x4F',
            'RIGHTARROW': '0x4F',
            'LEFT': '0x50',
            'LEFTARROW': '0x50',
            'DOWN': '0x51',
            'DOWNARROW': '0x51',
            'UP': '0x52',
            'UPARROW': '0x52',
            'GUI': '0xE3',
            'WINDOWS': '0xE3',
            'CTRL': '0xE0',
            'CONTROL': '0xE0',
            'SHIFT': '0xE1',
            'ALT': '0xE2',
            'MENU': '0x76',
            'APP': '0x65'
        };

        function charToHID(char) {
            const code = char.charCodeAt(0);
            if (code >= 97 && code <= 122) return `0x${(code - 93).toString(16).padStart(2, '0')}`;
            if (code >= 65 && code <= 90) return `0x${(code - 61).toString(16).padStart(2, '0')}`;
            if (code >= 49 && code <= 57) return `0x${(code - 19).toString(16).padStart(2, '0')}`;
            if (code === 48) return '0x27';
            
            const specialChars = {
                ' ': '0x2C', '!': '0x1E', '@': '0x1F', '#': '0x20', '$': '0x21',
                '%': '0x22', '^': '0x23', '&': '0x24', '*': '0x25', '(': '0x26',
                ')': '0x27', '-': '0x2D', '_': '0x2D', '=': '0x2E', '+': '0x2E',
                '[': '0x2F', '{': '0x2F', ']': '0x30', '}': '0x30', '\\': '0x31',
                '|': '0x31', ';': '0x33', ':': '0x33', "'": '0x34', '"': '0x34',
                ',': '0x36', '<': '0x36', '.': '0x37', '>': '0x37', '/': '0x38',
                '?': '0x38', '`': '0x35', '~': '0x35'
            };
            
            return specialChars[char] || '0x00';
        }

        function convertDuckyToHID(ducky) {
            const lines = ducky.split('\n');
            let hid = [];
            
            // Add ALOA header
            hid.push("layout('us');");
            hid.push("typingSpeed(100,150)");
            hid.push("");
            
            lines.forEach(line => {
                line = line.trim();
                
                // Handle REM comments
                if (line.startsWith('REM')) {
                    const comment = line.substring(4).trim();
                    hid.push(`// ${comment}`);
                    return;
                }
                
                if (!line) return;
                
                // Handle DELAY
                if (line.startsWith('DELAY')) {
                    const ms = line.split(' ')[1];
                    hid.push(`delay(${ms});`);
                }
                // Handle STRING
                else if (line.startsWith('STRING')) {
                    const text = line.substring(7);
                    // Escape special characters for JavaScript string
                    const escaped = text.replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n');
                    hid.push(`type("${escaped}");`);
                }
                // Handle key combinations
                else {
                    const parts = line.split(' ');
                    const keyNames = [];
                    
                    parts.forEach(part => {
                        const upper = part.toUpperCase();
                        // Map common Ducky Script keys to ALOA format
                        const aloaKeyMap = {
                            'GUI': 'GUI',
                            'WINDOWS': 'GUI',
                            'CTRL': 'CTRL',
                            'CONTROL': 'CTRL',
                            'SHIFT': 'SHIFT',
                            'ALT': 'ALT',
                            'ENTER': 'ENTER',
                            'ESC': 'ESC',
                            'ESCAPE': 'ESC',
                            'BACKSPACE': 'BACKSPACE',
                            'TAB': 'TAB',
                            'SPACE': 'SPACE',
                            'UP': 'UP',
                            'UPARROW': 'UP',
                            'DOWN': 'DOWN',
                            'DOWNARROW': 'DOWN',
                            'LEFT': 'LEFT',
                            'LEFTARROW': 'LEFT',
                            'RIGHT': 'RIGHT',
                            'RIGHTARROW': 'RIGHT',
                            'DELETE': 'DELETE',
                            'HOME': 'HOME',
                            'END': 'END',
                            'PAGEUP': 'PAGEUP',
                            'PAGEDOWN': 'PAGEDOWN',
                            'INSERT': 'INSERT',
                            'F1': 'F1', 'F2': 'F2', 'F3': 'F3', 'F4': 'F4',
                            'F5': 'F5', 'F6': 'F6', 'F7': 'F7', 'F8': 'F8',
                            'F9': 'F9', 'F10': 'F10', 'F11': 'F11', 'F12': 'F12',
                            'CAPSLOCK': 'CAPSLOCK',
                            'PRINTSCREEN': 'PRINTSCREEN',
                            'SCROLLLOCK': 'SCROLLLOCK',
                            'PAUSE': 'PAUSE',
                            'MENU': 'MENU',
                            'APP': 'APP'
                        };
                        
                        if (aloaKeyMap[upper]) {
                            keyNames.push(aloaKeyMap[upper]);
                        } else if (part.length === 1) {
                            keyNames.push(part.toLowerCase());
                        }
                    });
                    
                    if (keyNames.length > 0) {
                        hid.push(`press("${keyNames.join(' ')}");`);
                    }
                }
            });
            
            return hid.join('\n');
        }

        function handleImport() {
            // Show prank message
            const prankMsg = document.getElementById('prankMessage');
            prankMsg.classList.add('show');
            setTimeout(() => {
                prankMsg.classList.remove('show');
            }, 4000);
            
            // Create file input element
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.txt,.ducky';
            
            fileInput.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        document.getElementById('duckyInput').value = event.target.result;
                    };
                    reader.readAsText(file);
                }
            };
            
            // Trigger file picker
            fileInput.click();
        }

        function handleConvert() {
            const duckyInput = document.getElementById('duckyInput').value;
            const converted = convertDuckyToHID(duckyInput);
            document.getElementById('hidOutput').value = converted;
            
            document.getElementById('copyBtn').disabled = !converted;
            document.getElementById('downloadBtn').disabled = !converted;
        }

        function handleCopy() {
            const output = document.getElementById('hidOutput');
            output.select();
            document.execCommand('copy');
            
            const copyText = document.getElementById('copyText');
            copyText.textContent = 'Copied!';
            setTimeout(() => {
                copyText.textContent = 'Copy';
            }, 2000);
        }

        function handleDownload() {
            const text = document.getElementById('hidOutput').value;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'hid_script.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>